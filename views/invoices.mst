<!doctype html>
<html lang="ru">
    {{> head}}
    <body>
        <header class="navbar">
            {{> header}}
        </header>
        <main class="container mt-4" role="main">
            <nav aria-label="breadcrumb">
               {{> breadcrumb}}
            </nav>
            <h1 id="invoices-header">{{#searchQuery}}Результати пошуку{{/searchQuery}}{{^searchQuery}}Список{{^loginedUser.role}} моїх{{/loginedUser.role}} транспортних накладних{{/searchQuery}}</h1>
            <div class="row flex-xl-row px-3">
                <div class="col-xl-8" id="invoices-page-stats">
                    {{#searchQuery}}
                        <p>
                            Результати пошуку{{^loginedUser.role}} серед моїх{{/loginedUser.role}} транспортних накладних за запитом 
                            `<b>{{searchQuery}}</b>` по {{searchType.name}} накладної.
                        </p>
                        <p>
                            {{#invoices.0}}
                                Всього знайдено <b>{{totalCount}}</b> накладну(-і)(-их) за 
                                наданим пошуковим запитом{{^loginedUser.role}} серед моїх ТТН{{/loginedUser.role}}. На даній сторінці показано 
                                <b>{{currentCount}}</b> накладну(-і)(-их).
                                Ви знаходитесь на <b>{{currentPage}}</b> сторінці результатів
                                пошуку з <b>{{pages.length}}</b> всього.<br> 
                            {{/invoices.0}}
                            {{^invoices.0}}
                                За даним пошуковим запитом{{^loginedUser.role}} серед моїх ТТН{{/loginedUser.role}} нічого не знайдено :(
                            {{/invoices.0}}
                        </p>
                    {{/searchQuery}}
                    {{^searchQuery}}
                        <p>
                            {{#invoices.0}}
                                Ви знаходитесь на <b>{{currentPage}}</b> сторінці з 
                                <b>{{pages.length}}</b> всього.<br>
                                Нижче в <i>списку</i> наведено <b>{{currentCount}}</b> накладну(-і)(-их) з 
                                <b>{{totalCount}}</b> доступної(-их) на даний момент{{^loginedUser.role}} у особистому розпорядженні{{/loginedUser.role}}.
                            {{/invoices.0}}
                            {{^invoices.0}}
                                На жаль, на даний момент немає{{^loginedUser.role}} ваших{{/loginedUser.role}} накладних.
                            {{/invoices.0}}
                        </p>
                    {{/searchQuery}}
                </div>
                <div class="col-xl-4 search-block py-2">
                    <p class="text-center mb-0">Пошук накладної:</p>
                    <form id="search" action="/invoices/" class="form-inline mb-1" method="GET">
                        <label class="text-center w-100 pb-2">За:
                            <select name="t" id="type-search" class="ml-2 form-control custom-select form-control-sm">
                                <option value="num" {{^searchType}}selected{{/searchType}} {{#searchType.num}}selected{{/searchType.num}}>номером</option>
                                <option value="description" {{#searchType.desc}}selected{{/searchType.desc}}>описом</option>
                                <option value="location" {{#searchType.loc}}selected{{/searchType.loc}}>пот. положенням</option>
                            </select>
                        </label>
                        <div class="input-group mr-2 ml-auto">
                            <input class="form-control form-control-sm" name="q" id="search-field" type="text"  placeholder="№ квитанції" maxlength="50" aria-label="Пошук" {{#searchQuery}}value="{{searchQuery}}"{{/searchQuery}}>
                            <div class="input-group-append">
                                <div class="input-group-text hover-st" id="clear-search"><small>✗</small></div>
                            </div>
                        </div>
                        <button class="btn btn-outline-primary btn-sm mr-auto ml-sm-0 ml-auto mt-sm-0 mt-2" type="submit">Пошук</button>
                    </form>
                </div>
            </div>
            <div class="d-flex p-3">
                <a href="/invoices/new" class="btn btn-primary mx-auto " type="button">Створення товарно-транспортної накладної</a>
            </div>
            <p>
                Можна переглянути окрему сторінку кожної товарно-транспортної накладної:
            </p>
            <div class="pagination-wrapper"> 
                <ul id="invoices" class="mx-auto">
                    {{#invoices}}
                        <li><a target="_blank" class="link-style" href="/invoices/{{number}}"><img src="{{photoPath}}" height="30" width="30" class="ava small middle mr-1">ТТН №{{number}}</a></li>
                    {{/invoices}}
                    {{^invoices}}
                        <span class="informal">{{#searchQuery}}Нічого не знайдено{{^loginedUser.role}} серед моїх ТТН{{/loginedUser.role}}{{/searchQuery}}{{^searchQuery}}В реєстрі немає жодної{{^loginedUser.role}} моєї{{/loginedUser.role}} накладної{{/searchQuery}}</span>
                    {{/invoices}}
                </ul>
            </div>
            
            <nav aria-label="Page navigation" id="invoicesPagination">
            {{#pages.1}}
            <ul class="pagination justify-content-center">
                <li class="page-item {{^prevPage}} disabled{{/prevPage}}">
                    <a class="page-link" data-page="{{prevPage}}"><span aria-hidden="true" data-page="{{prevPage}}">&laquo;</span><span class="sr-only" data-page="{{prevPage}}">Previous</span></a>
                </li>
                {{#pages}}
                    {{^current}}
                    <li class="page-item"><a class="page-link" data-page="{{number}}">{{number}}</a></li>
                    {{/current}}
                    {{#current}}
                    <li class="page-item active">
                        <span class="page-link-current">
                            {{number}}
                            <span class="sr-only">(current)</span>
                        </span>
                    </li>
                    {{/current}}
                {{/pages}}
                <li class="page-item {{^nextPage}} disabled{{/nextPage}}">
                    <a class="page-link" data-page="{{nextPage}}"><span aria-hidden="true" data-page="{{nextPage}}">&raquo;</span><span class="sr-only" data-page="{{nextPage}}">Next</span></a>
                </li>
            </ul>
            {{/pages.1}}
            </nav>
           
            <p>
                На сторінці накладної можна дізнатися дату відправлення/прибуття, відправника,
                одержувача та іншу супутню інфориацію, а також є можливість редагування та видалення.
            </p>
        </main>
        <footer class="footer">
            {{> footer}}
        </footer>
        {{> scripts}} 
        <script defer src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.1/mustache.min.js" integrity="sha256-srhz/t0GOrmVGZryG24MVDyFDYZpvUH2+dnJ8FbpGi0=" crossorigin="anonymous"></script>
        <script defer src="/javascripts/invoice.js"></script>
        <script defer src="/javascripts/user.js"></script>
        <script defer src="/javascripts/ui-invoice.js"></script>
        <script defer src="/javascripts/browser-app.js"></script>  
    </body>
</html>